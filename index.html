function createRoute() {
            if (currentAddresses.length === 0) {
                alert('Recherchez d\'abord des DPE');
                return;
            }

            document.getElementById('emptyRoute').style.display = 'none';
            document.getElementById('routeContent').style.display = 'block';

            // Tri simple et rapide des adresses
            sortedAddresses = sortAddressesSmart(currentAddresses);
            
            document.getElementById('routeTotal').textContent = sortedAddresses.length;
            
            const numRoutes = Math.ceil(sortedAddresses.length / 9);
            document.getElementById('routeInfo').textContent = 
                numRoutes > 1 ? `Divis√© en ${numRoutes} itin√©raires optimis√©s` : 'Un seul itin√©raire optimis√©';

            if (sortedAddresses.length > 10) {
                document.getElementById('routeAlert').style.display = 'block';
            } else {
                document.getElementById('routeAlert').style.display = 'none';
            }

            const linksDiv = document.getElementById('routeLinks');
            linksDiv.innerHTML = '';

            // Cr√©ation des itin√©raires avec optimisation Google Maps
            for (let i = 0; i < numRoutes; i++) {
                const start = i * 9;
                const end = Math.min(start + 9, sortedAddresses.length);
                const routeAddresses = sortedAddresses.slice(start, end);

                const origin = encodeURIComponent(routeAddresses[0]);
                const destination = encodeURIComponent(routeAddresses[routeAddresses.length - 1]);
                const waypoints = routeAddresses.slice(1, -1).map(a => encodeURIComponent(a)).join('|');

                let url = `https://www.google.com/maps/dir/?api=1&origin=${origin}&destination=${destination}`;
                if (waypoints) {
                    url += `&waypoints=${waypoints}`;
                    url += '&waypoint_optimization=true';
                }
                url += '&travelmode=driving';

                linksDiv.innerHTML += `
                    <div class="route-card">
                        <h4>üöó Itin√©raire ${i + 1}/${numRoutes} <span class="address-count">${start + 1}-${end}</span></h4>
                        <p style="font-size: 0.9em; color: #666; margin-bottom: 10px;">‚ú® Tri intelligent + optimisation Google Maps</p>
                        <button class="btn btn-success" onclick="window.open('${url}', '_blank')">
                            Ouvrir l'itin√©raire ${i + 1}
                        </button>
                    </div>
                `;
            }

            switchScreen('route');
        }
